package com.virgenmilagrosa.presentacion;

import com.virgenmilagrosa.logicanegocio.gestionalumnos.Alumno_LN;
import com.virgenmilagrosa.logicanegocio.gestionalumnos.Apoderado_LN;
import com.virgenmilagrosa.logicanegocio.gestionsecciones.Seccion_LN;
import com.virgenmilagrosa.presentacion.generarmatricula.FrmGenerarActaCompromiso;

import com.virgenmilagrosa.presentacion.generarmatricula.FrmGenerarMatricula;
import com.virgenmilagrosa.presentacion.gestionalumnos.FrmModificarAlumno;
import com.virgenmilagrosa.presentacion.gestionalumnos.FrmRegistroAlumnos;
import com.virgenmilagrosa.presentacion.gestionsecciones.FrmAumentarVacante;
import com.virgenmilagrosa.presentacion.gestionsecciones.FrmModificarSeccion;
import com.virgenmilagrosa.presentacion.gestionsecciones.FrmRegistroSeccion;

import com.virgenmilagrosa.tranversal.control.Validaciones;
import com.virgenmilagrosa.tranversal.entidades.Alumnos;
import com.virgenmilagrosa.tranversal.entidades.Seccion;

import java.util.Collections;
import java.util.List;

import javax.swing.JOptionPane;
import javax.swing.JTable;
import javax.swing.table.DefaultTableModel;

/**
 *
 * @author lucho
 */
public class FrmInterfazPrincipal extends javax.swing.JFrame {

    /**
     * Creates new form FrmInterfazPrincipal
     */
    private int rol;

    public FrmInterfazPrincipal(int rol) {
        this.rol = rol;
        initComponents();
        desactivarBotones(rol);
        initAlumnos();
        initSeccion();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {
        bindingGroup = new org.jdesktop.beansbinding.BindingGroup();

        menuOpcionesAlumnos = new javax.swing.JPopupMenu();
        btnActualizarAlumno = new javax.swing.JMenuItem();
        btnEliminarAlumno = new javax.swing.JMenuItem();
        menuOpcionesSeccion = new javax.swing.JPopupMenu();
        ActualizarSeccion = new javax.swing.JMenuItem();
        EliminarSeccion = new javax.swing.JMenuItem();
        jPanel1 = new javax.swing.JPanel();
        jLayeredPane2 = new javax.swing.JLayeredPane();
        pnlPrincipal = new javax.swing.JPanel();
        colegio = new javax.swing.JLabel();
        jLabel1 = new javax.swing.JLabel();
        microscopio = new javax.swing.JLabel();
        bombilla = new javax.swing.JLabel();
        bombilla1 = new javax.swing.JLabel();
        bombilla2 = new javax.swing.JLabel();
        bombilla3 = new javax.swing.JLabel();
        bombilla4 = new javax.swing.JLabel();
        pnlSecciones = new javax.swing.JPanel();
        jScrollPane1 = new javax.swing.JScrollPane();
        tblSeccion = new javax.swing.JTable();
        btnAddSeccion = new javax.swing.JLabel();
        btnVolverS = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        pnlAlumnos = new javax.swing.JPanel();
        jScrollPane2 = new javax.swing.JScrollPane();
        tblAlumnos = new javax.swing.JTable();
        txtBuscarAlumno = new javax.swing.JTextField();
        btnAddAlumno = new javax.swing.JLabel();
        btnVolverA = new javax.swing.JLabel();
        btnBuscarAlumno = new javax.swing.JLabel();
        jLabel7 = new javax.swing.JLabel();
        jLabel11 = new javax.swing.JLabel();
        jLabel10 = new javax.swing.JLabel();
        jMenuBar1 = new javax.swing.JMenuBar();
        menuAlumnos = new javax.swing.JMenu();
        btnMostrarAlumnos = new javax.swing.JMenuItem();
        menuSeccion = new javax.swing.JMenu();
        btnMostrarSecciones = new javax.swing.JMenuItem();
        btnAumentarVac = new javax.swing.JMenuItem();
        menuMatricula = new javax.swing.JMenu();
        btnGenerarMatricula = new javax.swing.JMenuItem();
        btnGenerarActa = new javax.swing.JMenuItem();

        btnActualizarAlumno.setText("Modificar Alumno");
        btnActualizarAlumno.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnActualizarAlumnoActionPerformed(evt);
            }
        });
        menuOpcionesAlumnos.add(btnActualizarAlumno);

        btnEliminarAlumno.setText("Eliminar Alumno");
        btnEliminarAlumno.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnEliminarAlumnoActionPerformed(evt);
            }
        });
        menuOpcionesAlumnos.add(btnEliminarAlumno);

        ActualizarSeccion.setText("Actualizar Seccion");
        ActualizarSeccion.setActionCommand("Actualizar ");
        ActualizarSeccion.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                ActualizarSeccionActionPerformed(evt);
            }
        });
        menuOpcionesSeccion.add(ActualizarSeccion);

        EliminarSeccion.setText("Eliminar Seccion");
        EliminarSeccion.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                EliminarSeccionActionPerformed(evt);
            }
        });
        menuOpcionesSeccion.add(EliminarSeccion);

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setTitle("Sistema de Gestión de Matrícula");
        setBackground(new java.awt.Color(255, 255, 255));

        jPanel1.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jLayeredPane2.setMinimumSize(new java.awt.Dimension(700, 500));
        jLayeredPane2.setLayout(new java.awt.CardLayout());

        pnlPrincipal.setBackground(new java.awt.Color(255, 255, 255));
        pnlPrincipal.setPreferredSize(new java.awt.Dimension(700, 480));
        pnlPrincipal.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        colegio.setIcon(new javax.swing.ImageIcon(getClass().getResource("/escuela.png"))); // NOI18N
        pnlPrincipal.add(colegio, new org.netbeans.lib.awtextra.AbsoluteConstraints(270, 160, -1, 190));

        jLabel1.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Principal Frame/Principal-Frame1.png"))); // NOI18N
        pnlPrincipal.add(jLabel1, new org.netbeans.lib.awtextra.AbsoluteConstraints(-20, 0, 740, 50));

        microscopio.setIcon(new javax.swing.ImageIcon(getClass().getResource("/microscopio.png"))); // NOI18N
        pnlPrincipal.add(microscopio, new org.netbeans.lib.awtextra.AbsoluteConstraints(70, 210, 80, 80));

        bombilla.setIcon(new javax.swing.ImageIcon(getClass().getResource("/libros.png"))); // NOI18N
        pnlPrincipal.add(bombilla, new org.netbeans.lib.awtextra.AbsoluteConstraints(570, 230, 100, 80));

        bombilla1.setIcon(new javax.swing.ImageIcon(getClass().getResource("/bombilla.png"))); // NOI18N
        pnlPrincipal.add(bombilla1, new org.netbeans.lib.awtextra.AbsoluteConstraints(500, 60, 80, 90));

        bombilla2.setIcon(new javax.swing.ImageIcon(getClass().getResource("/birrete.png"))); // NOI18N
        pnlPrincipal.add(bombilla2, new org.netbeans.lib.awtextra.AbsoluteConstraints(470, 400, 100, 70));

        bombilla3.setIcon(new javax.swing.ImageIcon(getClass().getResource("/pizarra.png"))); // NOI18N
        pnlPrincipal.add(bombilla3, new org.netbeans.lib.awtextra.AbsoluteConstraints(180, 70, 100, -1));

        bombilla4.setIcon(new javax.swing.ImageIcon(getClass().getResource("/molecula.png"))); // NOI18N
        pnlPrincipal.add(bombilla4, new org.netbeans.lib.awtextra.AbsoluteConstraints(130, 370, 130, 110));

        jLayeredPane2.add(pnlPrincipal, "card6");

        pnlSecciones.setMinimumSize(new java.awt.Dimension(700, 500));
        pnlSecciones.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jScrollPane1.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N

        tblSeccion.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0)));
        tblSeccion.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N
        tblSeccion.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "CODIGO", "SECCION", "GRADO", "NRO_SALON", "NRO_VACANTES"
            }
        ));

        org.jdesktop.beansbinding.Binding binding = org.jdesktop.beansbinding.Bindings.createAutoBinding(org.jdesktop.beansbinding.AutoBinding.UpdateStrategy.READ_WRITE, menuOpcionesSeccion, org.jdesktop.beansbinding.ObjectProperty.create(), tblSeccion, org.jdesktop.beansbinding.BeanProperty.create("componentPopupMenu"));
        bindingGroup.addBinding(binding);

        jScrollPane1.setViewportView(tblSeccion);

        pnlSecciones.add(jScrollPane1, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 67, 650, 420));

        btnAddSeccion.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Listado Secciones/AñadirSec-Buttom.png"))); // NOI18N
        btnAddSeccion.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                btnAddSeccionMouseClicked(evt);
            }
        });
        pnlSecciones.add(btnAddSeccion, new org.netbeans.lib.awtextra.AbsoluteConstraints(560, 10, -1, -1));

        btnVolverS.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Listado Secciones/Volver-Buttom.png"))); // NOI18N
        btnVolverS.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                btnVolverSMouseClicked(evt);
            }
        });
        pnlSecciones.add(btnVolverS, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 10, -1, -1));

        jLabel4.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Listado Secciones/ListadoSec-Panel.png"))); // NOI18N
        pnlSecciones.add(jLabel4, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, -1, -1));

        jLayeredPane2.add(pnlSecciones, "card2");

        pnlAlumnos.setMinimumSize(new java.awt.Dimension(700, 500));
        pnlAlumnos.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        tblAlumnos.setBorder(javax.swing.BorderFactory.createCompoundBorder());
        tblAlumnos.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N
        tblAlumnos.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "CÓDIGO", "NOMBRE", "APELLIDO", "GRADO", "APODERADO"
            }
        ));
        tblAlumnos.setRowHeight(25);

        binding = org.jdesktop.beansbinding.Bindings.createAutoBinding(org.jdesktop.beansbinding.AutoBinding.UpdateStrategy.READ_WRITE, menuOpcionesAlumnos, org.jdesktop.beansbinding.ObjectProperty.create(), tblAlumnos, org.jdesktop.beansbinding.BeanProperty.create("componentPopupMenu"));
        bindingGroup.addBinding(binding);

        jScrollPane2.setViewportView(tblAlumnos);

        pnlAlumnos.add(jScrollPane2, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 137, 650, 340));

        txtBuscarAlumno.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N
        txtBuscarAlumno.setHorizontalAlignment(javax.swing.JTextField.CENTER);
        txtBuscarAlumno.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.LOWERED));
        pnlAlumnos.add(txtBuscarAlumno, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 70, 520, 30));

        btnAddAlumno.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Listado-Alumnos/AñadirAlum-Buttom.png"))); // NOI18N
        btnAddAlumno.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                btnAddAlumnoMouseClicked(evt);
            }
        });
        pnlAlumnos.add(btnAddAlumno, new org.netbeans.lib.awtextra.AbsoluteConstraints(560, 10, -1, -1));

        btnVolverA.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Listado-Alumnos/Volver-Buttom.png"))); // NOI18N
        btnVolverA.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                btnVolverAMouseClicked(evt);
            }
        });
        pnlAlumnos.add(btnVolverA, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 10, -1, -1));

        btnBuscarAlumno.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Listado-Alumnos/BuscarButtom.png"))); // NOI18N
        btnBuscarAlumno.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                btnBuscarAlumnoMouseClicked(evt);
            }
        });
        pnlAlumnos.add(btnBuscarAlumno, new org.netbeans.lib.awtextra.AbsoluteConstraints(560, 60, -1, -1));

        jLabel7.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Listado-Alumnos/ListadoAlum-Frame.png"))); // NOI18N
        pnlAlumnos.add(jLabel7, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, -1, -1));

        jLayeredPane2.add(pnlAlumnos, "card3");

        jPanel1.add(jLayeredPane2, new org.netbeans.lib.awtextra.AbsoluteConstraints(275, 15, -1, -1));

        jLabel11.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Ventana de Registro/Insignia.png"))); // NOI18N
        jPanel1.add(jLabel11, new org.netbeans.lib.awtextra.AbsoluteConstraints(60, 30, -1, -1));

        jLabel10.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Principal Frame/Principal2.png"))); // NOI18N
        jPanel1.add(jLabel10, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, 1010, -1));

        menuAlumnos.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Principal Frame/GestionAlum-Buttom.png"))); // NOI18N
        menuAlumnos.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                menuAlumnosActionPerformed(evt);
            }
        });

        btnMostrarAlumnos.setBackground(new java.awt.Color(255, 255, 255));
        btnMostrarAlumnos.setFont(new java.awt.Font("Segoe UI", 3, 13)); // NOI18N
        btnMostrarAlumnos.setForeground(new java.awt.Color(0, 102, 153));
        btnMostrarAlumnos.setIcon(new javax.swing.ImageIcon(getClass().getResource("/iconos/alumnos.png"))); // NOI18N
        btnMostrarAlumnos.setText("Mostrar alumnos");
        btnMostrarAlumnos.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
        btnMostrarAlumnos.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnMostrarAlumnosActionPerformed(evt);
            }
        });
        menuAlumnos.add(btnMostrarAlumnos);

        jMenuBar1.add(menuAlumnos);

        menuSeccion.setBorder(null);
        menuSeccion.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Principal Frame/Secciones-Buttom.png"))); // NOI18N
        menuSeccion.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                menuSeccionActionPerformed(evt);
            }
        });

        btnMostrarSecciones.setFont(new java.awt.Font("Segoe UI", 3, 14)); // NOI18N
        btnMostrarSecciones.setForeground(new java.awt.Color(0, 102, 153));
        btnMostrarSecciones.setIcon(new javax.swing.ImageIcon(getClass().getResource("/iconos/aulas.png"))); // NOI18N
        btnMostrarSecciones.setText("Mostrar Secciones");
        btnMostrarSecciones.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
        btnMostrarSecciones.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnMostrarSeccionesActionPerformed(evt);
            }
        });
        menuSeccion.add(btnMostrarSecciones);

        btnAumentarVac.setFont(new java.awt.Font("Segoe UI", 3, 14)); // NOI18N
        btnAumentarVac.setForeground(new java.awt.Color(0, 102, 153));
        btnAumentarVac.setIcon(new javax.swing.ImageIcon(getClass().getResource("/iconos/añadir.png"))); // NOI18N
        btnAumentarVac.setText("Aumentar Vacantes");
        btnAumentarVac.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
        btnAumentarVac.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnAumentarVacActionPerformed(evt);
            }
        });
        menuSeccion.add(btnAumentarVac);

        jMenuBar1.add(menuSeccion);

        menuMatricula.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Principal Frame/Matrícula-Buttom.png"))); // NOI18N

        btnGenerarMatricula.setFont(new java.awt.Font("Segoe UI", 3, 14)); // NOI18N
        btnGenerarMatricula.setForeground(new java.awt.Color(0, 102, 153));
        btnGenerarMatricula.setIcon(new javax.swing.ImageIcon(getClass().getResource("/iconos/matricula.png"))); // NOI18N
        btnGenerarMatricula.setText("Generar Matrícula");
        btnGenerarMatricula.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnGenerarMatriculaActionPerformed(evt);
            }
        });
        menuMatricula.add(btnGenerarMatricula);

        btnGenerarActa.setFont(new java.awt.Font("Segoe UI", 3, 14)); // NOI18N
        btnGenerarActa.setForeground(new java.awt.Color(0, 102, 153));
        btnGenerarActa.setIcon(new javax.swing.ImageIcon(getClass().getResource("/iconos/acta.png"))); // NOI18N
        btnGenerarActa.setText("Generar Acta de Compromiso");
        btnGenerarActa.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnGenerarActaActionPerformed(evt);
            }
        });
        menuMatricula.add(btnGenerarActa);

        jMenuBar1.add(menuMatricula);

        setJMenuBar(jMenuBar1);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, 1000, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 0, Short.MAX_VALUE))
        );

        bindingGroup.bind();

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void desactivarBotones(int rol) {
        if (rol == 1) {
            btnAumentarVac.setVisible(false);
        } else if (rol == 2) {
            menuAlumnos.setVisible(false);
            menuMatricula.setVisible(false);
            btnMostrarSecciones.setVisible(false);
        }
    }

    private void menuAlumnosActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_menuAlumnosActionPerformed
        // TODO add your handling code here:

    }//GEN-LAST:event_menuAlumnosActionPerformed

    private void menuSeccionActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_menuSeccionActionPerformed
        // TODO add your handling code here:

    }//GEN-LAST:event_menuSeccionActionPerformed

    private void btnMostrarAlumnosActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnMostrarAlumnosActionPerformed
        // TODO add your handling code here:
        pnlAlumnos.setVisible(true);
        pnlSecciones.setVisible(false);
        pnlPrincipal.setVisible(false);
    }//GEN-LAST:event_btnMostrarAlumnosActionPerformed

    private void btnMostrarSeccionesActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnMostrarSeccionesActionPerformed
        // TODO add your handling code here:
        pnlSecciones.setVisible(true);
        pnlAlumnos.setVisible(false);
        pnlPrincipal.setVisible(false);
    }//GEN-LAST:event_btnMostrarSeccionesActionPerformed

    private void btnVolverAMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_btnVolverAMouseClicked
        // TODO add your handling code here:
        pnlPrincipal.setVisible(true);
        pnlSecciones.setVisible(false);
        pnlAlumnos.setVisible(false);
    }//GEN-LAST:event_btnVolverAMouseClicked

    private void btnAddAlumnoMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_btnAddAlumnoMouseClicked
        // TODO add your handling code here:
        java.awt.EventQueue.invokeLater(() -> {
            new FrmRegistroAlumnos(this).setVisible(true);
        });
    }//GEN-LAST:event_btnAddAlumnoMouseClicked

    private void btnBuscarAlumnoMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_btnBuscarAlumnoMouseClicked
        // TODO add your handling code here:
    }//GEN-LAST:event_btnBuscarAlumnoMouseClicked

    private void btnVolverSMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_btnVolverSMouseClicked
        // TODO add your handling code here:
        pnlPrincipal.setVisible(true);
        pnlSecciones.setVisible(false);
        pnlAlumnos.setVisible(false);
    }//GEN-LAST:event_btnVolverSMouseClicked

    private void btnAddSeccionMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_btnAddSeccionMouseClicked
        java.awt.EventQueue.invokeLater(() -> {
            new FrmRegistroSeccion(this).setVisible(true);
        });


    }//GEN-LAST:event_btnAddSeccionMouseClicked

    private void btnGenerarMatriculaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnGenerarMatriculaActionPerformed
        // TODO add your handling code here:
        java.awt.EventQueue.invokeLater(() -> {
            new FrmGenerarMatricula().setVisible(true);
        });

    }//GEN-LAST:event_btnGenerarMatriculaActionPerformed

    private void btnGenerarActaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnGenerarActaActionPerformed
    /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Windows".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(FrmGenerarActaCompromiso.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(FrmGenerarActaCompromiso.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(FrmGenerarActaCompromiso.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(FrmGenerarActaCompromiso.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(() -> {
            new FrmGenerarActaCompromiso().setVisible(true);
        });
    }//GEN-LAST:event_btnGenerarActaActionPerformed

    private void btnAumentarVacActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnAumentarVacActionPerformed
        // TODO add your handling code here:
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
        * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Windows".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(FrmGenerarMatricula.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>
        /* Create and display the form */
        java.awt.EventQueue.invokeLater(() -> {
            new FrmAumentarVacante().setVisible(true);
        });
    }//GEN-LAST:event_btnAumentarVacActionPerformed

    private void btnActualizarAlumnoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnActualizarAlumnoActionPerformed
        // TODO add your handling code here:
        int fila = tblAlumnos.getSelectedRow();
        if (fila > -1) {

            int codAlumno = (Integer) tblAlumnos.getValueAt(fila, 0);

            java.awt.EventQueue.invokeLater(() -> {
                new FrmModificarAlumno(this, Alumno_LN.getInstance().buscarAlumno(codAlumno)).setVisible(true);
            });

        } else {
            JOptionPane.showMessageDialog(null, "Debe elegir un elemento de la tabla", "Incorrecto", JOptionPane.ERROR_MESSAGE);
        }
    }//GEN-LAST:event_btnActualizarAlumnoActionPerformed

    private void ActualizarSeccionActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_ActualizarSeccionActionPerformed
        // TODO add your handling code here:
        // TODO add your handling code here:
        int fila = tblSeccion.getSelectedRow();
        if (fila > -1) {

            int codSeccion = listaSecciones.get(fila).getCodSeccion();
            int codGrado = listaSecciones.get(fila).getCodGrado();
            System.out.println(codGrado);
            System.out.println(codSeccion);

            java.awt.EventQueue.invokeLater(() -> {
                new FrmModificarSeccion(
                        this,
                        Seccion_LN.getInstance().buscarSeccion(codSeccion, codGrado)
                ).setVisible(true);

                actualizarTablaAlumnos();
            });

        } else {
            JOptionPane.showMessageDialog(null, "Debe elegir un elemento de la tabla", "Incorrecto", JOptionPane.ERROR_MESSAGE);
        }
    }//GEN-LAST:event_ActualizarSeccionActionPerformed

    private void EliminarSeccionActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_EliminarSeccionActionPerformed
        // TODO add your handling code here:

        int seleccionfila = tblSeccion.getSelectedRow();

        if (seleccionfila >= 0) {

            int rpta = JOptionPane.showConfirmDialog(null, "¿REALMENTE QUIERE ELIMINAR ESTE USUARIO?");
            if (rpta == 0) {
                int codseccion = listaSecciones.get(seleccionfila).getCodSeccion();
                int codgrado = listaSecciones.get(seleccionfila).getCodGrado();
                seccionLN.eliminarSeccion(codseccion, codgrado);
                actualizarTablaSeccion();
            }
        } else {
            JOptionPane.showMessageDialog(null, "Debe elegir un elemento de la tabla", "Incorrecto", JOptionPane.ERROR_MESSAGE);
        }
    }//GEN-LAST:event_EliminarSeccionActionPerformed

    private void btnEliminarAlumnoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnEliminarAlumnoActionPerformed
        // TODO add your handling code here:
        int fila = tblAlumnos.getSelectedRow();
        if (fila > -1) {
            
            int codAlumno = (Integer) tblAlumnos.getValueAt(fila, 0);
            int codApoderado = Alumno_LN.getInstance().buscarAlumno(codAlumno).getCodApoderado();

            int opcion = JOptionPane.showConfirmDialog(null, "¿Está seguro que desea eliminar alumno");

            if (opcion != JOptionPane.CANCEL_OPTION) {
                if (opcion == JOptionPane.YES_OPTION) {
                    
                    Alumno_LN.getInstance().eliminarAlumno(codAlumno);
                    
                    String respuesta = Apoderado_LN.getInstance().eliminarApoderado(codApoderado);
                    
                    JOptionPane.showMessageDialog(null, respuesta, "Exito", JOptionPane.INFORMATION_MESSAGE);
                    
                    actualizarTablaAlumnos();

                }
            }

        } else {
            JOptionPane.showMessageDialog(null, "Debe elegir un elemento de la tabla", "Incorrecto", JOptionPane.ERROR_MESSAGE);
        }
    }//GEN-LAST:event_btnEliminarAlumnoActionPerformed

    /**
     * Autor: Yudely Palpán semana 3 cus implmentado, por corregir.
     */
    // <editor-fold defaultstate="collapsed" desc="Panel Seccion">  
    private DefaultTableModel modelo1;
    private Seccion_LN seccionLN = Seccion_LN.getInstance();
    private List<Seccion> listaSecciones;

    private void CargarTablaSeccion(DefaultTableModel modelo1, List<Seccion> total, JTable tabla1) {

        Object fila[] = new Object[5];

        for (int i = 0; i < total.size(); i++) {
            fila[0] = total.get(i).getCodSeccion();
            fila[1] = total.get(i).getNombreSeccion();
            fila[2] = total.get(i).getNombreGrado();
            fila[3] = total.get(i).getNroSalon();
            fila[4] = total.get(i).getNroVacantes();

            modelo1.addRow(fila);
        }

        tabla1.updateUI();
    }

    private void MostrarListaSeccion(DefaultTableModel modelo1, JTable tabla1) {
        listaSecciones = seccionLN.listarSecciones();
        CargarTablaSeccion(modelo1, listaSecciones, tabla1);

    }

    public void actualizarTablaSeccion() {
        //limpiar tabla1
        System.out.println("Limpiando tabla");
        while (modelo1.getRowCount() > 0) {
            modelo1.removeRow(0);
        }

        //actualiza y cargando
        MostrarListaSeccion(modelo1, tblSeccion);
    }

    private void initSeccion() {
        setLocationRelativeTo(null);

        modelo1 = new DefaultTableModel() {
            //para que las columnas y filas no se editen
            @Override
            public boolean isCellEditable(int fila, int columna) {
                return false;
            }
        };
        this.tblSeccion.setModel(modelo1);
        modelo1.addColumn("CODIGO");
        modelo1.addColumn("SECCION");
        modelo1.addColumn("GRADO");
        modelo1.addColumn("NRO_SALON");
        modelo1.addColumn("NRO_VACANTES");
        MostrarListaSeccion(modelo1, tblSeccion);
        tblSeccion.getTableHeader().setReorderingAllowed(false);
    }

    //</editor-fold>
    /**
     * Autor: Andrés Espinoza semana 2 cus implmentado.
     */
    // <editor-fold defaultstate="collapsed" desc="Panel Alumnos">  
    private DefaultTableModel modelo2;
    private Alumno_LN alumno = Alumno_LN.getInstance();
    private Apoderado_LN apad = Apoderado_LN.getInstance();
    private boolean consultar = false;
    private FrmRegistroAlumnos registro;
    private int id = 0;

    private void CargarTablaAlumnos(DefaultTableModel modelo2, List<Alumnos> total, JTable tabla2) {

        total = this.alumno.listarAlumnos();
        Object fila[] = new Object[8];

        for (int i = 0; i < total.size(); i++) {
            fila[0] = total.get(i).getCodAlu();
            fila[1] = total.get(i).getaPaternoAlu();
            fila[2] = total.get(i).getNombreAlu();
            fila[3] = total.get(i).getaMaternoAlu();
            fila[4] = total.get(i).getTelefonoAlu();
            fila[5] = total.get(i).getEmailAlu();
            fila[6] = total.get(i).getDireccionAlu();
            fila[7] = total.get(i).getCodApoderado();
            modelo2.addRow(fila);
        }
        tabla2.updateUI();
    }

    private void buscar() {
        String buscar = txtBuscarAlumno.getText();

        if (buscar.isEmpty()) {
            actualizarTablaAlumnos();
        } else if (!buscar.isEmpty()) {

            while (modelo2.getRowCount() > 0) {
                modelo2.removeRow(0);
            }

            Alumnos alu = alumno.buscarAlumno(Integer.parseInt(buscar));
            List<Alumnos> lista = Collections.singletonList(alu);
            CargarTablaAlumnos(modelo2, lista, tblAlumnos);
        }

    }

    private void MostrarLista(DefaultTableModel modelo2, JTable tabla2) {
        List<Alumnos> lista = alumno.listarAlumnos();
        CargarTablaAlumnos(modelo2, lista, tabla2);
    }

    public void actualizarTablaAlumnos() {
        //limpiar tabla2

        while (modelo2.getRowCount() > 0) {
            modelo2.removeRow(0);
        }
        //actualiza y cargando
        MostrarLista(modelo2, tblAlumnos);
    }

    private void initAlumnos() {
        setLocationRelativeTo(null);
        Validaciones validaciones = new Validaciones();
        validaciones.ValidarSoloNumeros(txtBuscarAlumno);

        modelo2 = new DefaultTableModel() {
            //para que las columnas y filas no se editen
            @Override
            public boolean isCellEditable(int fila, int columna) {
                return false;
            }
        };
        this.tblAlumnos.setModel(modelo2);
        modelo2.addColumn("CODIGO");
        modelo2.addColumn("AP. PATERNO");
        modelo2.addColumn("NOMBRE");
        modelo2.addColumn("AP. MATERNO");
        modelo2.addColumn("TELEFONO");
        modelo2.addColumn("EMAIL");
        modelo2.addColumn("DIRECCION");
        modelo2.addColumn("APODERADO");
        MostrarLista(modelo2, tblAlumnos);
        tblAlumnos.getTableHeader().setReorderingAllowed(false);
    }
    //</editor-fold>
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JMenuItem ActualizarSeccion;
    private javax.swing.JMenuItem EliminarSeccion;
    private javax.swing.JLabel bombilla;
    private javax.swing.JLabel bombilla1;
    private javax.swing.JLabel bombilla2;
    private javax.swing.JLabel bombilla3;
    private javax.swing.JLabel bombilla4;
    private javax.swing.JMenuItem btnActualizarAlumno;
    private javax.swing.JLabel btnAddAlumno;
    private javax.swing.JLabel btnAddSeccion;
    private javax.swing.JMenuItem btnAumentarVac;
    private javax.swing.JLabel btnBuscarAlumno;
    private javax.swing.JMenuItem btnEliminarAlumno;
    private javax.swing.JMenuItem btnGenerarActa;
    private javax.swing.JMenuItem btnGenerarMatricula;
    private javax.swing.JMenuItem btnMostrarAlumnos;
    private javax.swing.JMenuItem btnMostrarSecciones;
    private javax.swing.JLabel btnVolverA;
    private javax.swing.JLabel btnVolverS;
    private javax.swing.JLabel colegio;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel11;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLayeredPane jLayeredPane2;
    private javax.swing.JMenuBar jMenuBar1;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JMenu menuAlumnos;
    private javax.swing.JMenu menuMatricula;
    private javax.swing.JPopupMenu menuOpcionesAlumnos;
    private javax.swing.JPopupMenu menuOpcionesSeccion;
    private javax.swing.JMenu menuSeccion;
    private javax.swing.JLabel microscopio;
    private javax.swing.JPanel pnlAlumnos;
    private javax.swing.JPanel pnlPrincipal;
    private javax.swing.JPanel pnlSecciones;
    private javax.swing.JTable tblAlumnos;
    private javax.swing.JTable tblSeccion;
    private javax.swing.JTextField txtBuscarAlumno;
    private org.jdesktop.beansbinding.BindingGroup bindingGroup;
    // End of variables declaration//GEN-END:variables
}
